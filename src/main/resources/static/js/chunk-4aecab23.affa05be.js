(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4aecab23"],{"1f34":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-button",{attrs:{type:"primary"},on:{click:e.handleAddUser}},[e._v("New User")]),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:e.userList,border:""}},[r("el-table-column",{attrs:{align:"center",label:"username",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.username)+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"nickname",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.nickname)+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"header-center",label:"Description"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.description)+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"Operations"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(r){return e.handleEdit(t)}}},[e._v("Edit")]),e._v(" "),r("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(r){return e.handleDelete(t)}}},[e._v("Delete")])]}}])})],1),e._v(" "),r("el-pagination",{staticStyle:{"margin-top":"30px"},attrs:{"current-page":e.listQuery.page,"page-sizes":[10,20,30,40],"page-size":e.listQuery.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"update:currentPage":function(t){return e.$set(e.listQuery,"page",t)},"update:current-page":function(t){return e.$set(e.listQuery,"page",t)},"update:pageSize":function(t){return e.$set(e.listQuery,"size",t)},"update:page-size":function(t){return e.$set(e.listQuery,"size",t)},"current-change":e.getUsers,"size-change":e.search}}),e._v(" "),r("el-dialog",{attrs:{visible:e.dialogVisible,title:"edit"===e.dialogType?"Edit User":"New User"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"form",attrs:{model:e.user,rules:e.userRules,"label-width":"80px","label-position":"left"}},[r("el-form-item",{attrs:{label:"User",prop:"username"}},[r("el-input",{attrs:{disabled:"edit"===e.dialogType,placeholder:"username"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),e._v(" "),"new"===e.dialogType?r("el-form-item",{attrs:{label:"Pass",prop:"password"}},[r("el-input",{attrs:{placeholder:"password",type:"password","show-password":!0},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"Nick",prop:"nickname"}},[r("el-input",{attrs:{placeholder:"nickname"},model:{value:e.user.nickname,callback:function(t){e.$set(e.user,"nickname",t)},expression:"user.nickname"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Desc"}},[r("el-input",{attrs:{autosize:{minRows:2,maxRows:4},type:"textarea",placeholder:"User Description"},model:{value:e.user.description,callback:function(t){e.$set(e.user,"description",t)},expression:"user.description"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Role"}},[r("el-select",{attrs:{clearable:"",placeholder:"Please Choose"},model:{value:e.user.role.id,callback:function(t){e.$set(e.user.role,"id",t)},expression:"user.role.id"}},e._l(e.rolesList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),r("div",{staticStyle:{"text-align":"right"}},[r("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancel")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.confirmUser}},[e._v("Confirm")])],1)],1)],1)},a=[],s=(r("96cf"),r("3b8d")),i=r("ed08"),l=r("c24f"),o=r("cc5e"),u={id:"",username:"",password:"",nickname:"",avatar:"",introduction:"",role:{id:null}},c={name:"User",data:function(){var e=this,t=function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(r,n,a){var s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!(n.length<5)){t.next=4;break}a(new Error("The username can not be less than 5 digits")),t.next=9;break;case 4:return t.next=6,Object(l["h"])(e.user.id,n);case 6:s=t.sent,i=s.data,i?a():a(new Error("username already exits"));case 9:case"end":return t.stop()}},t)}));return function(e,r,n){return t.apply(this,arguments)}}(),r=function(e,t,r){!t||t.length<6?r(new Error("The password can not be less than 6 digits")):r()};return{user:Object(i["c"])(u),userList:[],total:0,listLoading:!0,listQuery:{page:1,size:10,sort:""},dialogVisible:!1,dialogType:"new",userRules:{nickname:[{required:!0,trigger:"blur"}],username:[{required:!0,trigger:"blur",validator:t}],password:[{required:!0,trigger:"blur",validator:r}]},rolesList:[]}},created:function(){this.getUsers(),this.getAllRole()},methods:{getUsers:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,r,n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.listLoading=!0,e.next=3,Object(l["d"])(this.listQuery);case 3:t=e.sent,r=t.data,n=r.content,a=r.totalElements,this.userList=n,this.total=a,this.listLoading=!1;case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getAllRole:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["c"])();case 2:t=e.sent,this.rolesList=t.data;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),search:function(){this.listQuery.page=1,this.getUsers()},handleAddUser:function(){var e=this;this.user=Object(i["c"])(u),this.dialogType="new",this.dialogVisible=!0,this.$nextTick(function(){e.$refs.form.resetFields()})},handleEdit:function(e){var t=this;this.dialogType="edit",this.dialogVisible=!0,this.$nextTick(function(){t.$refs.form.clearValidate();var r=Object(i["c"])(e.row);r.role||(r.role={id:null}),t.user=r})},handleDelete:function(e){var t=this,r=(e.$index,e.row);this.$confirm("Confirm to remove the user?","Warning",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["b"])(r.id);case 2:t.$message.success("Delete succed!"),t.getUsers();case 4:case"end":return e.stop()}},e)}))).catch(function(e){console.error(e)})},confirmUser:function(){var e=this;this.$refs.form.validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(r){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=15;break}if(n="edit"===e.dialogType,!n){t.next=7;break}return t.next=5,Object(l["g"])(e.user);case 5:t.next=10;break;case 7:return console.log(e.user),t.next=10,Object(l["a"])(e.user);case 10:e.dialogVisible=!1,e.$message.success("succed!"),e.getUsers(),t.next=17;break;case 15:return console.log("error submit!!"),t.abrupt("return",!1);case 17:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}}},d=c,p=r("2877"),f=Object(p["a"])(d,n,a,!1,null,"566facd6",null);t["default"]=f.exports},cc5e:function(e,t,r){"use strict";r.d(t,"c",function(){return s}),r.d(t,"a",function(){return i}),r.d(t,"b",function(){return l}),r.d(t,"d",function(){return o});var n=r("b775"),a="/role";function s(){return Object(n["a"])({url:a,method:"get"})}function i(e){return Object(n["a"])({url:a,method:"post",data:e})}function l(e){return Object(n["a"])({url:a+"/".concat(e),method:"delete"})}function o(e){return Object(n["a"])({url:a,method:"put",data:e})}}}]);